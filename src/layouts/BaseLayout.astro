---
import "../styles/global.css";
import favicon from "../assets/favicon.svg";
import Footer from "../components/Footer.astro";
import SEO from "../components/SEO.astro";
import SchemaPerson from "../components/SchemaPerson.astro";

// Tipado separado para evitar objetos inline grandes que a veces confunden el parser
interface LayoutProps {
  title?: string;
  description?: string;
  lang?: string;
  image?: string;
  imageAlt?: string;
  url?: string;
  noIndex?: boolean;
  publishedTime?: string; // ISO
  modifiedTime?: string;  // ISO
  tags?: string[];
  type?: 'article' | 'website' | 'artwork';
  author?: string;
  contentType?: string;
}

const props = Astro.props as LayoutProps;
const title = props.title ?? 'Canvas Docente';
const description = props.description ?? '20 a√±os de artes visuales';
const lang = props.lang ?? 'es';
const { 
  image, 
  imageAlt,
  url, 
  noIndex = false, 
  publishedTime, 
  modifiedTime, 
  tags = [],
  type = 'website',
  author,
  contentType,
} = props;
---
<html lang={lang} class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href={favicon.src} sizes="any" />
    
    <SEO 
      title={title}
      description={description}
      url={url}
      image={image}
      imageAlt={imageAlt}
      publishedTime={publishedTime}
      modifiedTime={modifiedTime}
      tags={tags}
      noIndex={noIndex}
      type={type}
      author={author}
      contentType={contentType}
    />
    
    <SchemaPerson />
  </head>
  <body class="min-h-screen bg-white text-slate-900 antialiased flex flex-col">
    <slot name="header" />
    <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 flex-1 w-full">
      <slot />
    </main>
    {Astro.slots.has('footer') ? (
      <slot name="footer" />
    ) : (
      <Footer />
    )}
  </body>
</html>
