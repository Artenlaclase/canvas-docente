---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import Header from "../../../components/Header.astro";
import Gallery from "../../../components/Gallery.astro";
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const all = await getCollection('galeria');
  const techniques = [...new Set(all.map((p) => p.data.technique))];
  return techniques.map((t) => ({ params: { technique: t }, props: { technique: t } }));
}

const { technique } = Astro.props as { technique: string };
const all = await getCollection('galeria');
const items = all.filter((p) => p.data.technique === technique);
---
<BaseLayout title={`${technique} | GalerÃ­a`}>
  <Fragment slot="header"><Header /></Fragment>
  <h1 class="text-2xl font-semibold mb-6">{technique}</h1>
  <Gallery items={items} />
</BaseLayout>
